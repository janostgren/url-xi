{
    "testName": "Ticketmonster Get Event",
    "variables": [
        {
            "key": "eventId",
            "type": "number",
            "usage": "",
            "value": "'let arr=[1,2];arr[Math.floor(Math.random() * arr.length)]'"
        },
        {
            "key": "defIdleTime",
            "type": "number",
            "usage": "input",
            "value": 500,
            "validation": "value > 499 && value <= 15000"
        },
        {
            "key": "requestIdleTime",
            "type": "number",
            "usage": "input",
            "value": 500,
            "validation": "value > 499 && value <= 15000"
        },
        {
            "key": "sections",
            "type": "number",
            "usage": "inResponse",
            "value": 0
        },
        {
            "key": "capacity",
            "type": "number",
            "usage": "returnValue",
            "value": 0,
            "unit": "seats"
        },
        {
            "key": "venueName",
            "type": "string",
            "usage": "inResponse",
            "value": ""
        }
    ],
    "baseURL": "http://ticketmonster.apicasystem.com",
    "config": {},
    "idleBetweenRequests": "{{defIdleTime}}",
    "steps": [
        {
            "stepName": "Get Events",
            "idleBetweenRequests": "{{requestIdleTime}}",
            "requests": [
                {
                    "config": {
                        "method": "get",
                        "url": "/ticket-monster/rest/events",
                        "params": {
                            "_": "{{$timestamp}}"
                        }
                    },
                    "extractors": [
                        {
                            "type": "jsonpath",
                            "expression": "$[*].id",
                            "variable": "eventId"
                        },
                        {
                            "type": "header",
                            "expression": "x-powered-by",
                            "variable": "xPoweredBy"
                        }
                    ]
                }
            ]
        },
        {
            "stepName": "Get Shows",
            "requests": [
                {
                    "config": {
                        "method": "get",
                        "url": "/ticket-monster/rest/shows",
                        "params": {
                            "_": "{{$timestamp}}",
                            "event": "{{eventId}}"
                        }
                    },
                    "extractors": [
                        {
                            "type": "jsonpath",
                            "expression": "$..venue.name",
                            "variable": "venueName"
                        },
                        {
                            "type": "jsonpath",
                            "expression": "$..venue.capacity",
                            "variable": "capacity"
                        },
                        {
                            "type": "jsonpath",
                            "expression": "$..venue.sections[*].id",
                            "variable": "sections",
                            "counter": true
                        }
                    ]
                }
            ]
        }
    ]
}